<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DIESEL</title>
  </head>
  <body>
    <script src="diesel.js"></script>
    <script>
      Module.onRuntimeInitialized = function () {
        while (true) {
          const expr = prompt("DIESEL", "$(+,1,2,3,4)");
          // const inputStr = "$(+,1,2,3,4)";
          const outputStr = ""; // Usually, you'll just allocate space for output

          // Allocate memory for strings in the WebAssembly memory space
          const inPtr = Module.allocateUTF8(expr);
          const outPtr = Module.allocateUTF8(outputStr);

          const result = Module._diesel(inPtr, outPtr);

          const output = Module.UTF8ToString(outPtr);
          alert(`Input: ${expr}\nOutput: ${output}`);
        }
      };
    </script>
  </body>
</html>
